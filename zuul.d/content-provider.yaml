---
# zuul.d/content-provider.yaml
# Zuul layout for TripleO content-provider jobs.

# ATTENTION: Try to avoid adding irrelevant-files inside templates
# or project because it does override values defined at job level.
# An attempt to optimize at this level can have the exactly opposite effect,
# triggering the affected jobs on far more changes than needed.

- job:
    name: tripleo-ci-content-provider-required-projects-upstream
    parent: tripleo-ci-content-provider-standard
    abstract: true
    required-projects:
      - opendev.org/openstack/tripleo-ansible
      - opendev.org/openstack/tripleo-operator-ansible
      - name: opendev.org/openstack/ansible-config_template
        override-checkout: master

- job:
    name: tripleo-ci-centos-8-content-provider
    parent: tripleo-ci-content-provider-required-projects-upstream
    branches: ^(stable/(train|ussuri|victoria|wallaby)).*$
    nodeset: single-centos-8-node


- job:
    name: tripleo-ci-centos-9-content-provider
    parent: tripleo-ci-content-provider-required-projects-upstream
    branches: ^(?!stable/(train|ussuri|victoria)).*$
    nodeset: single-centos-9-node
    vars:
      containers_base_image: quay.io/centos/centos:stream9

- job:
    name: tripleo-ci-centos-9-content-provider-wallaby
    parent: tripleo-ci-centos-9-content-provider
    override-checkout: stable/wallaby
    vars:
      branch_override: stable/wallaby

- job:
    name: tripleo-ci-centos-8-content-provider-wallaby
    parent: tripleo-ci-centos-8-content-provider
    override-checkout: stable/wallaby
    vars:
      branch_override: stable/wallaby

- job:
    name: tripleo-ci-centos-8-content-provider-victoria
    parent: tripleo-ci-centos-8-content-provider
    override-checkout: stable/victoria
    vars:
      branch_override: stable/victoria

- job:
    name: tripleo-ci-centos-8-content-provider-ussuri
    parent: tripleo-ci-centos-8-content-provider
    override-checkout: stable/ussuri
    vars:
      branch_override: stable/ussuri

- job:
    name: tripleo-ci-centos-8-content-provider-train
    parent: tripleo-ci-centos-8-content-provider
    override-checkout: stable/train
    vars:
      branch_override: stable/train
